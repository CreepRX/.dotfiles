#!/usr/bin/env bash
# -*- mode: sh; -*-

DIR="$HOME/.cache/dunst"
file="$DIR/dunst.log"

icon_path=/usr/share/icons/Adwaita/16x16/status/:/usr/share/icons/Adwaita/16x16/devices/:/usr/share/icons/Adwaita/16x16/legacy/


OUT=$(awk -F';;' '{printf ("%s : %s : %s \n", $1, $2, $3)}' $file |
    rofi -dmenu -multi-select -p "Notification " -config ~/.config/rofi/notification.rasi -show-icons |
    awk -F' : ' '{printf("%s;;%s;;%s\n",$1,$2,$3)}')

# echo $LINES
# \x00icon\x1ffile-browser\n
if [ -z "$OUT" ]; then
    exit 0
fi

while read -r line; do
    line=${line//\//\\/}
    echo $line
    sed -i -e "s\\$line\\\\g" $file
done <<<"$OUT"

sed -i -r '/^\s*$/d' $file
