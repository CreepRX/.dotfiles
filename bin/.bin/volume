#!/bin/sh
# -*- mode:sh -*-

# Required packages:
# 1. pamixer

STEP=5
if [[ "$1" == "up" ]]; then
    pamixer -i $STEP #to increase 5%

elif [[ "$1" == "down" ]]; then
    pamixer -d $STEP #to decrease 5%

elif [[ "$1" == "mute" ]]; then
    pamixer -t #to toggle mute

elif [[ "$1" == "get" ]]; then
    VOL=$(pamixer --get-volume)
    [[ $(pamixer --get-mute) == "true" ]] && VOL="0"
    echo $VOL% #to show volume status
fi

[[ "$2" == "--no-prompt" ]] && exit 0

NUMBER=$(pamixer --get-volume)
[[ $(pamixer --get-mute) == "true" ]] && NUMBER="0"

N=$(bc <<< "($NUMBER / 3.33)")
for i in $(seq 1 $N); do
    BAR+="|"
done
echo $N

COL="#ffffff"
if [[ $NUMBER -gt 75 ]]; then
    COL="#ff0000"
elif [[ $NUMBER -gt 50 ]]; then
    COL="#ffff00"
elif [[ $NUMBER -gt 25 ]]; then
    COL="#00ff00"
fi
ICON=/usr/share/icons/Adwaita41/scalable/apps/multimedia-volume-control-symbolic.svg
ID=379

notify-send -i "$ICON" "Volume $NUMBER%" "<span color=\'$COL\'>$BAR</span>" -c "Volume" -r $ID

play /usr/share/sounds/gnome/default/alerts/drip.ogg
